ServerRoot ${XDG_CONFIG_HOME}/user-share
PidFile pid
LockFile lock
LogLevel crit
#LogLevel info
ErrorLog log
DAVLockDB lock

LimitXMLRequestBody 100000

LoadModule dav_module @HTTP_MODULES_PATH@/mod_dav.so
LoadModule dav_fs_module @HTTP_MODULES_PATH@/mod_dav_fs.so
LoadModule authn_file_module @HTTP_MODULES_PATH@/mod_authn_file.so
LoadModule auth_digest_module @HTTP_MODULES_PATH@/mod_auth_digest.so
LoadModule authz_groupfile_module @HTTP_MODULES_PATH@/mod_authz_groupfile.so

DocumentRoot ${XDG_PUBLICSHARE_DIR}
<Directory "${XDG_PUBLICSHARE_DIR}">
  AllowOverride None
  DAV On

  AuthType Digest
  AuthName "Please log in as the user guest"
  AuthDigestDomain /

  AuthDigestProvider file
  AuthUserFile ${XDG_CONFIG_HOME}/user-share/passwd
  AuthGroupFile @DATADIR@/gnome-user-share/dav_groupfile


  <IfDefine RequirePasswordAlways>
    Require user guest
    Require group guest
  </IfDefine>

  <IfDefine RequirePasswordOnWrite>
    <LimitExcept GET OPTIONS PROPFIND>
      Require user guest
      Require group guest
    </LimitExcept>
  </IfDefine>
</Directory>

StartServers 1
MaxClients 3

<IfModule mpm_prefork_module>
  MinSpareServers 1
  MaxSpareServers 1
</IfModule>

<IfModule mpm_worker_module>
  MinSpareThreads 1
  MaxSpareThreads 1
  ThreadsPerChild 3
</IfModule>

<IfModule mpm_event_module>
  MinSpareThreads 1
  MaxSpareThreads 1
  ThreadsPerChild 3
</IfModule>
